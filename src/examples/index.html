<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Re:Frame</title>
  <style>
    html, body, #container {
      width: 100%;
      height: 100%;
      margin: 0;
    }
  </style>
</head>
<body>
<div id="container"></div>

<!-- Shaders -->
<script id="vss" type="x-shader/x-vertex">
  uniform vec3 uSamplingPoints[MAX_SAMPLING_POINT_COUNT];
  uniform int uSamplingCount;

  varying float vWeight;

  void main() {

    // calculate vertex weight.
    vWeight = 0.0;
    for(int i = 0; i < uSamplingCount; i ++) {
      vWeight = max(vWeight, max(1.0 - distance(position, uSamplingPoints[i]), 0.0));
    }

    // calculate vertex position.
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
</script>
<script id="fss" type="x-shader/x-fragment">
  uniform sampler2D tColorMap;

  varying float vWeight;

  void main() {
    gl_FragColor = texture2D(tColorMap, vec2(vWeight, 0.5));
//    gl_FragColor = vec4(vWeight, 0, 1.0 - vWeight, 1.0);
  }
</script>

<!-- GameEngine -->
<script type="importmap">
{
  "imports": {
    "three": "../../node_modules/three/build/three.module.js",
    "OrbitControls": "../../node_modules/three/examples/jsm/controls/OrbitControls.js",
    "reframe": "../../src/reframe/index.js"
  }
}
</script>
<script type="module" src="index.js"></script>

<!-- Initialize spector debugger. -->
<script src="../../node_modules/spectorjs/dist/spector.bundle.js"></script>
<script>
  const spector = new SPECTOR.Spector();
  spector.displayUI();
</script>
</body>
</html>